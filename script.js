const translations = {
  en: {
    govt_of_india: "Government of India",
    bharat_sarkar: "Government of India",
    site_title: "Mahanadi Coalfields Limited",
    about_us: "About Us",
    english_option: "English",
    hindi_option: "Hindi",
    goi_enterprise: "A Government of India Enterprise",
    home: "Home",
    acts_heading: "ACTs",
    acts_tab: "ACTs",
    manuals_tab: "Manuals",
    rules_tab: "Rules",
    circulars_tab: "Circulars",
    standing_orders_tab: "Standing Orders",
    mou_tab: "MOU",
    policies_tab: "Policies",
    dop_tab: "DOP",
    staff_seniority_tab: "Staff Seniority List",
    posh_tab: "PoSH Act, 2013",
    wips_tab: "WIPS MCL",
    guidelines_tab: "Guidelines",
    vigilance_tab: "Vigilance Related",
    learn_more: "Learn More",
    sustainable_mining: "Sustainable Mining",
    sustainable_mining_desc: "Leading the way in environmentally responsible mining practices while maintaining high production standards.",
    our_approach: "Our Approach",
    community_development: "Community Development",
    community_development_desc: "Empowering local communities through comprehensive CSR initiatives and sustainable development programs.",
    csr_activities: "CSR Activities",
    announcements: "Announcements",
    welcome_msg: "Welcome to Mahanadi Coalfields Limited - A Government of India Enterprise",
    latest_tender: "Latest Tender: Supply of Mining Equipment - Last Date: 30th April 2024",
    recruitment_drive: "Recruitment Drive: Applications Open for Various Positions - Apply Now!",
    csr_initiative: "CSR Initiative: New Community Development Program Launched",
    safety_first: "Safety First: Annual Safety Week Celebration from 1st to 7th May 2024",
    about_mcl: "About MCL",
    about_mcl_desc: "Mahanadi Coalfields Limited (MCL) is one of the leading coal producing companies in India. It is a subsidiary of Coal India Limited, under the Ministry of Coal, Government of India. MCL is responsible for coal mining and production in the Mahanadi area, contributing significantly to the energy security and industrial development of the country. The company is committed to sustainable mining practices, community development, and environmental protection, maintaining a balance between energy needs and ecological preservation.",
    formation: "Formation",
    admin_setup: "Administrative Setup",
    board_of_directors: "Board of Directors",
    bioprofile_projects: "Bioprofile of Projects",
    corp_mgmt_policy: "Corporate Mgmt. Policy",
    manpower: "Manpower",
    coal_production: "Coal Production",
    productivity: "Productivity",
    offtake: "Offtake",
    safety: "Safety",
    payment_exchequer: "Payment to Exchequer",
    hq_departments: "HQ Departments",
    production_areas: "Production Areas",
    rti_act: "RTI Act",
    grievances: "Grievances",
    pg_portal: "PG Portal",
    samvaad_portal: "Samvaad Portal",
    news_media: "News & Media",
    notices: "Notices",
    public_relations: "Public Relations",
    info_bank: "Info Bank",
    careers: "Careers",
    tenders: "Tenders",
    quick_links: "Quick Links",
    sitemap: "Sitemap",
    important_links: "Important Links",
    ministry_of_coal: "Ministry of Coal",
    coal_india_ltd: "Coal India Limited",
    make_in_india: "Make in India",
    mygov: "MyGov",
    contact_us: "Contact Us",
    company_name: "Mahanadi Coalfields Limited",
    mcl_bhawan: "MCL Bhawan",
    burla_sambalpur: "Burla, Sambalpur",
    odisha_pin: "Odisha - 768020",
    follow_us: "Follow Us",
    customize_cookies: "Customize cookies",
    cookie_usage: "This website uses cookies to provide a better user experience.",
    cookie_policy: "By clicking accept, you agree to the policies outlined in the",
    cookie_settings: "Cookie Settings",
    decline_cookies: "Decline optional cookies",
    accept_all_cookies: "Accept all cookies",
    accept: "Accept",
    powering_growth: "Powering India's Growth",
    mcl_commitment: "Mahanadi Coalfields Limited is committed to sustainable coal production, ensuring energy security and contributing to India's industrial growth."
  },
  hi: {
    govt_of_india: "भारत सरकार",
    bharat_sarkar: "भारत सरकार",
    site_title: "महानदी कोलफील्ड्स लिमिटेड",
    about_us: "हमारे बारे में",
    english_option: "अंग्रे़ी",
    hindi_option: "हिंदी",
    goi_enterprise: "भारत सरकार का उपक्रम",
    home: "मुखपृष्ठ",
    acts_heading: "अधिनियम",
    acts_tab: "अधिनियम",
    manuals_tab: "मैनुअल",
    rules_tab: "नियम",
    circulars_tab: "परिपत्र",
    standing_orders_tab: "स्थायी आदेश",
    mou_tab: "एमओयू",
    policies_tab: "नीतियाँ",
    dop_tab: "डीओपी",
    staff_seniority_tab: "कर्मचारी वरिष्ठता सूची",
    posh_tab: "पॉश अधिनियम, 2013",
    wips_tab: "डब्ल्यूआईपीएस एमसीएल",
    guidelines_tab: "दिशानिर्देश",
    vigilance_tab: "सतर्कता संबंधित",
    learn_more: "और जानें",
    sustainable_mining: "सतत खनन",
    sustainable_mining_desc: "पर्यावरणीय रूप से जिम्मेदार खनन प्रथाओं में अग्रणी, उच्च उत्पादन मानकों के साथ।",
    our_approach: "हमारा दृष्टिकोण",
    community_development: "सामुदायिक विकास",
    community_development_desc: "समग्र सीएसआर पहलों और सतत विकास कार्यक्रमों के माध्यम से स्थानीय समुदायों को सशक्त बनाना।",
    csr_activities: "सीएसआर गतिविधियाँ",
    announcements: "घोषणाएँ",
    welcome_msg: "महानदी कोलफील्ड्स लिमिटेड में आपका स्वागत है - भारत सरकार का उपक्रम",
    latest_tender: "नवीनतम निविदा: खनन उपकरण की आपूर्ति - अंतिम तिथि: 30 अप्रैल 2024",
    recruitment_drive: "भर्ती अभियान: विभिन्न पदों के लिए आवेदन खुले हैं - अभी आवेदन करें!",
    csr_initiative: "सीएसआर पहल: नया सामुदायिक विकास कार्यक्रम शुरू",
    safety_first: "सुरक्षा पहले: वार्षिक सुरक्षा सप्ताह 1 से 7 मई 2024 तक",
    about_mcl: "एमसीएल के बारे में",
    about_mcl_desc: "महानदी कोलफील्ड्स लिमिटेड (एमसीएल) भारत की प्रमुख कोयला उत्पादक कंपनियों में से एक है। यह कोल इंडिया लिमिटेड की एक सहायक कंपनी है, जो कोयला मंत्रालय, भारत सरकार के अधीन है। एमसीएल महानदी क्षेत्र में कोयला खनन और उत्पादन के लिए जिम्मेदार है, जो देश की ऊर्जा सुरक्षा और औद्योगिक विकास में महत्वपूर्ण योगदान देता है। कंपनी सतत खनन प्रथाओं, सामुदायिक विकास और पर्यावरण संरक्षण के लिए प्रतिबद्ध है, जिससे ऊर्जा आवश्यकताओं और पारिस्थितिकी संरक्षण के बीच संतुलन बना रहे।",
    formation: "गठन",
    admin_setup: "प्रशासनिक सेटअप",
    board_of_directors: "निदेशक मंडल",
    bioprofile_projects: "परियोजनाओं की जीवनी",
    corp_mgmt_policy: "कॉर्पोरेट प्रबंधन नीति",
    manpower: "जनशक्ति",
    coal_production: "कोयला उत्पादन",
    productivity: "उत्पादकता",
    offtake: "ऑफटेक",
    safety: "सुरक्षा",
    payment_exchequer: "राजकोष को भुगतान",
    hq_departments: "मुख्यालय विभाग",
    production_areas: "उत्पादन क्षेत्र",
    rti_act: "सूचना का अधिकार अधिनियम",
    grievances: "शिकायतें",
    pg_portal: "पीजी पोर्टल",
    samvaad_portal: "संवाद पोर्टल",
    news_media: "समाचार और मीडिया",
    notices: "सूचनाएँ",
    public_relations: "जनसंपर्क",
    info_bank: "सूचना बैंक",
    careers: "करियर",
    tenders: "निविदाएँ",
    quick_links: "त्वरित लिंक",
    sitemap: "साइटमैप",
    important_links: "महत्वपूर्ण लिंक",
    ministry_of_coal: "कोयला मंत्रालय",
    coal_india_ltd: "कोल इंडिया लिमिटेड",
    make_in_india: "मेक इन इंडिया",
    mygov: "मायगव",
    contact_us: "संपर्क करें",
    company_name: "महानदी कोलफील्ड्स लिमिटेड",
    mcl_bhawan: "एमसीएल भवन",
    burla_sambalpur: "बुर्ला, संबलपुर",
    odisha_pin: "ओडिशा - 768020",
    follow_us: "हमें फॉलो करें",
    customize_cookies: "कुकीज़ अनुकूलित करें",
    cookie_usage: "यह वेबसाइट बेहतर उपयोगकर्ता अनुभव प्रदान करने के लिए कुकीज़ का उपयोग करती है।",
    cookie_policy: "स्वीकार पर क्लिक करके, आप कुकी सेटिंग्स में उल्लिखित नीतियों से सहमत होते हैं।",
    cookie_settings: "कुकी सेटिंग्स",
    decline_cookies: "वैकल्पिक कुकीज़ अस्वीकार करें",
    accept_all_cookies: "सभी कुकीज़ स्वीकार करें",
    accept: "स्वीकार करें",
    powering_growth: "भारत के विकास को गति देना",
    mcl_commitment: "महानदी कोलफील्ड्स लिमिटेड सतत कोयला उत्पादन, ऊर्जा सुरक्षा सुनिश्चित करने और भारत के औद्योगिक विकास में योगदान देने के लिए प्रतिबद्ध है।"
  }
};

function changeLanguage(lang) {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            el.innerHTML = translations[lang][key];
            console.log('Translated', key, 'to', translations[lang][key]);
        }
    });
    document.getElementById('languageDropdown')?.classList.remove('show');
    localStorage.setItem('lang', lang);
}

document.addEventListener('DOMContentLoaded', function() {
    // --- Language: Set preferred language on page load ---
    const savedLang = localStorage.getItem('lang') || 'en';
    changeLanguage(savedLang);

    // --- Set language dropdown to saved language ---
    const languageSelect = document.querySelector('#languageDropdown select');
    if (languageSelect) {
        languageSelect.value = savedLang;
    }    // --- Announcements Pause Button ---
    const pauseBtn = document.querySelector('.announcement-pause-btn');
    const scrollContent = document.querySelector('.announcement-scroll');
    
    if (pauseBtn && scrollContent) {
        // Initialize button state
        const updatePauseButton = (isPaused) => {
            pauseBtn.classList.toggle('paused', isPaused);
            pauseBtn.setAttribute('title', isPaused ? 'Resume announcements' : 'Pause announcements');
            pauseBtn.setAttribute('aria-label', isPaused ? 'Resume announcements' : 'Pause announcements');
            scrollContent.classList.toggle('paused', isPaused);
        };

        pauseBtn.addEventListener('click', function() {
            const willBePaused = !this.classList.contains('paused');
            updatePauseButton(willBePaused);
        });

        // Initialize with running state
        updatePauseButton(false);
    }

    // --- Slider logic ---
    const slides = document.querySelectorAll('.slider .slide');
    const dots = document.querySelectorAll('.dot');
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    let currentSlide = 0;
    let slideInterval;

    function showSlide(index) {
        // Remove active class from all slides
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));

        // Add active class to current slide
        slides[index].classList.add('active');
        dots[index].classList.add('active');

        currentSlide = index;
        changeLanguage(localStorage.getItem('lang') || 'en');
    }

    // Function to show next slide
    function nextSlide() {
        let next = currentSlide + 1;
        if (next >= slides.length) {
            next = 0; // Go back to first slide
        }
        showSlide(next);
    }

    // Function to show previous slide
    function prevSlide() {
        let prev = currentSlide - 1;
        if (prev < 0) {
            prev = slides.length - 1; // Go to last slide
        }
        showSlide(prev);
    }

    // Event listeners for buttons
    if (nextBtn) nextBtn.addEventListener('click', () => {
        nextSlide();
        resetInterval();
    });

    if (prevBtn) prevBtn.addEventListener('click', () => {
        prevSlide();
        resetInterval();
    });

    // Event listeners for dots
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            showSlide(index);
            resetInterval();
        });
    });

    // Auto slide function
    function startSlideInterval() {
        slideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
    }

    // Reset interval function
    function resetInterval() {
        clearInterval(slideInterval);
        startSlideInterval();
    }

    // Start auto sliding if slides exist
    if (slides.length > 0) {
        startSlideInterval();

        // Pause auto sliding when hovering over the slider
        const slider = document.querySelector('.slider');
        if (slider) {
            slider.addEventListener('mouseenter', () => {
                clearInterval(slideInterval);
            });

            slider.addEventListener('mouseleave', () => {
                startSlideInterval();
            });
        }
    }

    // Add keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
            prevSlide();
            resetInterval();
        } else if (e.key === 'ArrowRight') {
            nextSlide();
            resetInterval();
        }
    });

    // --- Language dropdown functionality ---
    const translateBtn = document.getElementById('translateBtn');
    const languageDropdown = document.getElementById('languageDropdown');
    if (translateBtn && languageDropdown) {
        translateBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            languageDropdown.classList.toggle('show');
        });
        document.addEventListener('click', function(e) {
            if (!languageDropdown.contains(e.target) && !translateBtn.contains(e.target)) {
                languageDropdown.classList.remove('show');
            }
        });
        languageDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }

    // --- Accessibility Panel Functions ---
    function toggleAccessibility() {
        const panel = document.getElementById('accessibilityPanel');
        panel.classList.toggle('active');
    }

    // Text size management
    let currentTextSize = 100;

    function increaseTextSize() {
        currentTextSize += 10;
        document.body.style.fontSize = currentTextSize + '%';
        localStorage.setItem('textSize', currentTextSize);
        updateResetButtonVisibility();
    }

    function decreaseTextSize() {
        currentTextSize = Math.max(70, currentTextSize - 10);
        document.body.style.fontSize = currentTextSize + '%';
        localStorage.setItem('textSize', currentTextSize);
        updateResetButtonVisibility();
    }

    // Toggle functions for accessibility features
    function toggleDarkContrast() {
        document.body.classList.toggle('dark-contrast');
        const isActive = document.body.classList.contains('dark-contrast');
        localStorage.setItem('darkContrast', isActive);
        
        // Reset other color-related features when dark contrast is enabled
        if (isActive) {
            document.body.classList.remove('inverted', 'saturated');
            localStorage.setItem('inverted', 'false');
            localStorage.setItem('saturated', 'false');
            document.getElementById('invertBtn')?.classList.remove('active');
            document.getElementById('saturationBtn')?.classList.remove('active');
        }
        updateResetButtonVisibility();
    }

    function toggleInvert() {
        document.body.classList.toggle('inverted');
        const isActive = document.body.classList.contains('inverted');
        localStorage.setItem('inverted', isActive);
        
        // Reset other color-related features when invert is enabled
        if (isActive) {
            document.body.classList.remove('dark-contrast', 'saturated');
            localStorage.setItem('darkContrast', 'false');
            localStorage.setItem('saturated', 'false');
            document.getElementById('darkContrastBtn')?.classList.remove('active');
            document.getElementById('saturationBtn')?.classList.remove('active');
        }
        updateResetButtonVisibility();
    }

    function toggleSaturation() {
        document.body.classList.toggle('saturated');
        const isActive = document.body.classList.contains('saturated');
        localStorage.setItem('saturated', isActive);
        
        // Reset other color-related features when saturation is enabled
        if (isActive) {
            document.body.classList.remove('dark-contrast', 'inverted');
            localStorage.setItem('darkContrast', 'false');
            localStorage.setItem('inverted', 'false');
            document.getElementById('darkContrastBtn')?.classList.remove('active');
            document.getElementById('invertBtn')?.classList.remove('active');
        }
        updateResetButtonVisibility();
    }

    function toggleHighlightLinks() {
        document.body.classList.toggle('highlight-links');
        const isActive = document.body.classList.contains('highlight-links');
        localStorage.setItem('highlightLinks', isActive);
        updateResetButtonVisibility();
    }

    function toggleHideImages() {
        document.body.classList.toggle('hide-images');
        const isActive = document.body.classList.contains('hide-images');
        localStorage.setItem('hideImages', isActive);
        updateResetButtonVisibility();
    }

    function toggleDefaultCursor() {
        document.body.classList.toggle('default-cursor');
        const isActive = document.body.classList.contains('default-cursor');
        localStorage.setItem('defaultCursor', isActive);
        updateResetButtonVisibility();
    }

    // Function to check if any accessibility feature is active
    function isAnyFeatureActive() {
        return document.body.classList.contains('dark-contrast') ||
               document.body.classList.contains('inverted') ||
               document.body.classList.contains('saturated') ||
               document.body.classList.contains('highlight-links') ||
               document.body.classList.contains('hide-images') ||
               document.body.classList.contains('default-cursor') ||
               currentTextSize !== 100;
    }

    // Function to update reset button visibility
    function updateResetButtonVisibility() {
        const resetBtn = document.getElementById('resetAccessibility');
        if (resetBtn) {
            resetBtn.style.display = isAnyFeatureActive() ? 'block' : 'none';
        }
    }

    // Initialize accessibility features from localStorage
    function initializeAccessibilityFeatures() {
        // Text size
        const savedTextSize = localStorage.getItem('textSize');
        if (savedTextSize) {
            currentTextSize = parseInt(savedTextSize);
            document.body.style.fontSize = currentTextSize + '%';
        }

        // Dark contrast
        if (localStorage.getItem('darkContrast') === 'true') {
            document.body.classList.add('dark-contrast');
            document.getElementById('darkContrastBtn')?.classList.add('active');
        }

        // Invert
        if (localStorage.getItem('inverted') === 'true') {
            document.body.classList.add('inverted');
            document.getElementById('invertBtn')?.classList.add('active');
        }

        // Saturation
        if (localStorage.getItem('saturated') === 'true') {
            document.body.classList.add('saturated');
            document.getElementById('saturationBtn')?.classList.add('active');
        }

        // Highlight links
        if (localStorage.getItem('highlightLinks') === 'true') {
            document.body.classList.add('highlight-links');
            document.getElementById('highlightLinksBtn')?.classList.add('active');
        }

        // Hide images
        if (localStorage.getItem('hideImages') === 'true') {
            document.body.classList.add('hide-images');
            document.getElementById('hideImagesBtn')?.classList.add('active');
        }

        // Default cursor
        if (localStorage.getItem('defaultCursor') === 'true') {
            document.body.classList.add('default-cursor');
            document.getElementById('defaultCursorBtn')?.classList.add('active');
        }

        // Update reset button visibility
        updateResetButtonVisibility();
    }

    // Initialize accessibility features
    initializeAccessibilityFeatures();

    // Reset all accessibility features to default
    function resetAccessibility() {
        // Reset text size
        currentTextSize = 100;
        document.body.style.fontSize = '100%';
        localStorage.removeItem('textSize');

        // Reset all classes
        document.body.classList.remove(
            'dark-contrast',
            'inverted',
            'saturated',
            'highlight-links',
            'hide-images',
            'default-cursor'
        );

        // Clear all localStorage items
        localStorage.removeItem('darkContrast');
        localStorage.removeItem('inverted');
        localStorage.removeItem('saturated');
        localStorage.removeItem('highlightLinks');
        localStorage.removeItem('hideImages');
        localStorage.removeItem('defaultCursor');

        // Reset all button states
        const buttons = document.querySelectorAll('.accessibility-controls button');
        buttons.forEach(button => button.classList.remove('active'));

        // Hide reset button
        updateResetButtonVisibility();
    }

    // Add click event listener to reset button
    const resetBtn = document.getElementById('resetAccessibility');
    if (resetBtn) {
        resetBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            resetAccessibility();
        });
    }

    // Add click event listener to accessibility button
    const accessBtn = document.querySelector('.access-btn[title="Accessibility Options"]');
    if (accessBtn) {
        accessBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            toggleAccessibility();
        });
    }

    // Add click event listener to close button
    const closeBtn = document.getElementById('closeAccessibilityPanel');
    if (closeBtn) {
        closeBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            toggleAccessibility();
        });
    }

    // Add click event listeners to all accessibility control buttons
    document.getElementById('darkContrastBtn')?.addEventListener('click', function() {
        toggleDarkContrast();
        this.classList.toggle('active');
    });

    document.getElementById('invertBtn')?.addEventListener('click', function() {
        toggleInvert();
        this.classList.toggle('active');
    });

    document.getElementById('saturationBtn')?.addEventListener('click', function() {
        toggleSaturation();
        this.classList.toggle('active');
    });

    document.getElementById('increaseTextBtn')?.addEventListener('click', function() {
        increaseTextSize();
        this.classList.toggle('active');
    });

    document.getElementById('decreaseTextBtn')?.addEventListener('click', function() {
        decreaseTextSize();
        this.classList.toggle('active');
    });

    document.getElementById('highlightLinksBtn')?.addEventListener('click', function() {
        toggleHighlightLinks();
        this.classList.toggle('active');
    });

    document.getElementById('hideImagesBtn')?.addEventListener('click', function() {
        toggleHideImages();
        this.classList.toggle('active');
    });

    document.getElementById('defaultCursorBtn')?.addEventListener('click', function() {
        toggleDefaultCursor();
        this.classList.toggle('active');
    });

    // Close panel when clicking outside
    document.addEventListener('click', function(event) {
        const panel = document.getElementById('accessibilityPanel');
        const accessBtn = document.querySelector('.access-btn[title="Accessibility Options"]');
        
        if (panel && !panel.contains(event.target) && !accessBtn.contains(event.target)) {
            panel.classList.remove('active');
        }
    });

    // Key Offerings Tab Switching
    function setupOfferingsTabs() {
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        tabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active from all
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                // Add active to clicked
                this.classList.add('active');
                const tab = this.getAttribute('data-tab');
                document.getElementById(tab).classList.add('active');
            });
        });
    }

    setupOfferingsTabs();

    // Events Gallery Slider
    const eventSlides = document.querySelectorAll('.events-slider .event-slide');
    const eventPrevBtn = document.querySelector('.events-prev-btn');
    const eventNextBtn = document.querySelector('.events-next-btn');
    const eventDots = document.querySelectorAll('.events-dot');
    let eventCurrentSlide = 0;

    function showEventSlide(idx) {
        eventSlides.forEach((slide, i) => {
            slide.classList.toggle('active', i === idx);
        });
        eventDots.forEach((dot, i) => {
            dot.classList.toggle('active', i === idx);
        });
        eventCurrentSlide = idx;
    }

    if (eventPrevBtn && eventNextBtn && eventSlides.length > 0) {
        eventPrevBtn.addEventListener('click', function() {
            let idx = (eventCurrentSlide - 1 + eventSlides.length) % eventSlides.length;
            showEventSlide(idx);
        });
        eventNextBtn.addEventListener('click', function() {
            let idx = (eventCurrentSlide + 1) % eventSlides.length;
            showEventSlide(idx);
        });
        eventDots.forEach((dot, i) => {
            dot.addEventListener('click', function() {
                showEventSlide(i);
            });
        });
    }

    // Mobile Menu Functionality
    const hamburgerMenu = document.getElementById('hamburgerMenu');
    const mainMenu = document.querySelector('.main-menu');
    const menuOverlay = document.getElementById('menuOverlay');
    const dropdowns = document.querySelectorAll('.dropdown');

    function toggleMenu() {
        hamburgerMenu.classList.toggle('active');
        mainMenu.classList.toggle('active');
        menuOverlay.classList.toggle('active');
        document.body.style.overflow = mainMenu.classList.contains('active') ? 'hidden' : '';
    }

    hamburgerMenu.addEventListener('click', toggleMenu);
    menuOverlay.addEventListener('click', toggleMenu);

    // Handle dropdowns in mobile view
    dropdowns.forEach(dropdown => {
        const link = dropdown.querySelector('a');
        link.addEventListener('click', (e) => {
            if (window.innerWidth <= 768) {
                e.preventDefault();
                dropdown.classList.toggle('active');
            }
        });
    });

    // Close menu when window is resized above mobile breakpoint
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            hamburgerMenu.classList.remove('active');
            mainMenu.classList.remove('active');
            menuOverlay.classList.remove('active');
            document.body.style.overflow = '';
            dropdowns.forEach(dropdown => dropdown.classList.remove('active'));
        }
    });

    function updateScrollBtnVisibility() {
        var innernav = document.querySelector('.navigationSection .innernav');
        var nav = innernav ? innernav.querySelector('.nav') : null;
        var scrollBtn = innernav ? innernav.querySelector('.scroll-btn') : null;
        if (!innernav || !nav || !scrollBtn) return;
        if (nav.scrollWidth > nav.clientWidth + 2) {
            innernav.classList.add('show-scroll-btn');
        } else {
            innernav.classList.remove('show-scroll-btn');
        }
    }
    updateScrollBtnVisibility();
    window.addEventListener('resize', updateScrollBtnVisibility);
}); // End of previous event listener block

// Cookie Consent Bar Logic
document.addEventListener('DOMContentLoaded', function() {
    const consentBar = document.getElementById('cookieConsentBar');
    const acceptBtn = document.getElementById('rcc-confirm-button');
    const declineBtn = document.getElementById('rcc-decline-button');

    console.log('Initial elements:', { consentBar, acceptBtn, declineBtn });

    function handleCookieConsent(accepted) {
        console.log('Cookie consent:', accepted ? 'accepted' : 'declined');
        if (consentBar) {
            consentBar.style.cssText = 'display: none !important';
            document.cookie = `cookieConsent=${accepted ? 'accepted' : 'declined'}; path=/; max-age=${365*24*60*60}`;
            localStorage.setItem('cookieConsent', accepted ? 'accepted' : 'declined');
        }
    }

    if (acceptBtn) {
        acceptBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Accept clicked');
            handleCookieConsent(true);
            return false;
        });
    }

    if (declineBtn) {
        declineBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Decline clicked');
            handleCookieConsent(false);
            return false;
        });
    }

    // Check if we already have consent
    const hasConsent = document.cookie.split(';').some(item => item.trim().startsWith('cookieConsent=')) 
        || localStorage.getItem('cookieConsent');

    if (hasConsent && consentBar) {
        consentBar.style.cssText = 'display: none !important';
    }
});

document.getElementById('sliderButton').addEventListener('click', function() {
    const navigationSection = document.querySelector('.navigationSection');
    navigationSection.style.transition = 'transform 0.5s ease';
    navigationSection.style.transform = 'translateX(100%)'; // Adjust the value as needed
});